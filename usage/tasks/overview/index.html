<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">
        <title>Overview - TPO</title>
        <link href="../../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../../css/brands.min.css" rel="stylesheet">
        <link href="../../../css/solid.min.css" rel="stylesheet">
        <link href="../../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../../..">TPO</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../../.." class="nav-link">Home</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../../overview/" class="nav-link">Overview</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Setup</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../setup/summary/" class="dropdown-item">Summary</a>
</li>
                                    
<li>
    <a href="../../../setup/local-installation/" class="dropdown-item">Local Installation</a>
</li>
                                    
<li>
    <a href="../../../setup/local-build/" class="dropdown-item">Local Build</a>
</li>
                                    
<li>
    <a href="../../../setup/cloud-deployment/" class="dropdown-item">Cloud Deployment</a>
</li>
                                    
<li>
    <a href="../../../setup/local-development/" class="dropdown-item">Local Development</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle active" aria-current="page" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Usage</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../cli/" class="dropdown-item">TPO Command Line Interface</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Configuration</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../configuration/overview/" class="dropdown-item">Overview</a>
</li>
            
<li>
    <a href="../../configuration/settings-file/" class="dropdown-item">Settings</a>
</li>
            
<li>
    <a href="../../configuration/genome-support/" class="dropdown-item">Genome-Support</a>
</li>
            
<li>
    <a href="../../configuration/bcl-barcodes/" class="dropdown-item">BCL-Barcodes</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Tasks</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="./" class="dropdown-item active" aria-current="page">Overview</a>
</li>
            
<li>
    <a href="../analysis-tasks/" class="dropdown-item">Analysis Tasks</a>
</li>
            
<li>
    <a href="../development-tasks/" class="dropdown-item">Development Tasks</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Pipelines</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../pipelines/overview/" class="dropdown-item">Overview</a>
</li>
            
<li>
    <a href="../../pipelines/onco-seq/" class="dropdown-item">OncoSeq</a>
</li>
            
<li>
    <a href="../../pipelines/wgs-wes/" class="dropdown-item">WGS+WES</a>
</li>
            
<li>
    <a href="../../pipelines/shallow-wgs/" class="dropdown-item">Shallow WGS</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">R Packages</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../r-packages/overview/" class="dropdown-item">Overview</a>
</li>
            
<li>
    <a href="../../r-packages/tpolib/" class="dropdown-item">tpolib</a>
</li>
            
<li>
    <a href="../../r-packages/codac/" class="dropdown-item">codac</a>
</li>
            
<li>
    <a href="../../r-packages/cnvex/" class="dropdown-item">cnvex</a>
</li>
            
<li>
    <a href="../../r-packages/carat/" class="dropdown-item">carat</a>
</li>
            
<li>
    <a href="../../r-packages/caniq/" class="dropdown-item">caniq</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Shiny Apps</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../shiny-apps/overview/" class="dropdown-item">Overview</a>
</li>
            
<li>
    <a href="../../shiny-apps/curve/" class="dropdown-item">curve</a>
</li>
            
<li>
    <a href="../../shiny-apps/cnvex-viewer/" class="dropdown-item">cnvex-viewer</a>
</li>
            
<li>
    <a href="../../shiny-apps/structural-viewer.md" class="dropdown-item">structural-viewer</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Output</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../output/somatic-variants/" class="dropdown-item">Somatic Variants</a>
</li>
                                    
<li>
    <a href="../../../output/silos-and-vaults/" class="dropdown-item">Silos and Vaults</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Development</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../development/architecture/" class="dropdown-item">Architecture</a>
</li>
                                    
<li>
    <a href="../../../development/debugging/" class="dropdown-item">Debugging</a>
</li>
                                    
<li>
    <a href="../../../development/repository/" class="dropdown-item">Repository</a>
</li>
                                    
<li>
    <a href="../../../development/updating-references/" class="dropdown-item">Updating References</a>
</li>
                                    
<li>
    <a href="../../../development/updating-ensembl/" class="dropdown-item">Updating Ensembl</a>
</li>
                                    
<li>
    <a href="../../../development/updating-panel-of-normals/" class="dropdown-item">Updating Panel-of-Normals</a>
</li>
                                    
<li>
    <a href="../../../development/unit-testing/" class="dropdown-item">Unit Testing</a>
</li>
                                    
<li>
    <a href="../../../development/adding-tasks/" class="dropdown-item">Adding Tasks</a>
</li>
                                    
<li>
    <a href="../../../development/adding-capture-panel/" class="dropdown-item">Adding Capture Panel</a>
</li>
                                    
<li>
    <a href="../../../development/use-tpo-in-local-mode/" class="dropdown-item">Use TPO in Local Mode</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Notes</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../notes/overview/" class="dropdown-item">Overview</a>
</li>
                                    
<li>
    <a href="../../../notes/circos/" class="dropdown-item">circos</a>
</li>
                                    
<li>
    <a href="../../../notes/examples/" class="dropdown-item">Examples</a>
</li>
                                    
<li>
    <a href="../../../notes/misc/" class="dropdown-item">Misc</a>
</li>
                                    
<li>
    <a href="../../../notes/integrative-analysis/" class="dropdown-item">Integrative Analysis</a>
</li>
                                    
<li>
    <a href="../../../notes/use-cases/" class="dropdown-item">Use Cases</a>
</li>
                                    
<li>
    <a href="../../../notes/variant-and-feature-manual-review/" class="dropdown-item">Variant & Feature Manual Review</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../../configuration/bcl-barcodes/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../analysis-tasks/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="2"><a href="#overview" class="nav-link">Overview</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="2"><a href="#pipeline-commands" class="nav-link">Pipeline commands</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="2"><a href="#infrastructure-commands" class="nav-link">Infrastructure commands</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="2"><a href="#overview-of-pipeline-structure" class="nav-link">Overview of pipeline structure</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="2"><a href="#modifying-pipeline-command-parameters" class="nav-link">Modifying pipeline command parameters</a>
              <ul class="nav flex-column">
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h2 id="overview">Overview</h2>
<p>The TPO commands fall into two main categories <code>pipeline</code> commands, and <code>infrastructure</code> commands (see list below). The <code>pipeline</code> commands execute TPO analysis pipelines given some input data and save the outputs in a GCP bucket. The <code>infrastructure</code> commands manage references, docker / GCP images, and used mostly in the <a href="Build">build</a> and <a href="Development">development</a> process.</p>
<p>In general, the <code>pipeline</code> commands are configured (via a config file) and provided with inputs (as a parameters). The <code>infrastructure</code> commands are also configured via the same config file, but typically do not have data inputs.</p>
<h2 id="pipeline-commands">Pipeline commands</h2>
<pre><code>    ## BCL
    bcl                 Execute BCL pipeline
    ## DNA analysis
    cords_align         Execute CORDS ALIGN pipeline
    cords_unalign       Execute CORDS UNALIGN pipeline
    cords_postalign     Execute CORDS POSTALIGN pipeline
    cords_somatic       Execute CORDS SOMATIC pipeline
    cords_germline      Execute CORDS GERMLINE pipeline
    cords_cnvex         Execute CORDS CNVEX pipeline
    cords_structural    Execute CORDS STRUCTURAL pipeline
    cords_misc          Execute CORDS MISC pipeline
    ## RNA analysis 
    crisp_align         Execute CRISP ALIGN pipeline
    crisp_quasr         Execute CRISP QUASR pipeline
    crisp_codac         Execute CRISP CODAC pipeline
    crisp_germline      Execute CRISP GERMLINE pipeline
    crisp_quant         Execute CRISP QUANT pipeline
    ## annotation and reporting
    carat_anno          Execute CARAT ANNO pipeline
    carat_report        Execute CARAT REPORT pipeline   
</code></pre>
<h2 id="infrastructure-commands">Infrastructure commands</h2>
<pre><code>    ## Modifying and updating references
    refs_pull           Pull references from GCP
    refs_push           Push references to GCP
    ## Code development
    code_build          Build TPO Code Images
    code_push           Push code image to GCR
    code_pull           Pull code image from GCR
    ## Docker images build and deployment
    boot_build          Build TPO Boot Images
    boot_pull           Pull TPO Boot images from GCR
    boot_push           Push TPO Boot images to GCR
    ## GCP images build and deployment
    gcp_boot_build      Build boot GCP image/disk
    gcp_root_build      Build root GCP image/disk
    gcp_root_push       Push root/tpo from image to GS
    gcp_root_pull       Pull root/tpo from GS to local
    ## Debug and testing
    template            Execute TEMPLATE pipeline
    gcp_instance        Start GCP instance to develop pipelines
    gcp_configure       Configure needed GCP resources (TODO)

</code></pre>
<h2 id="overview-of-pipeline-structure">Overview of pipeline structure</h2>
<p><img alt="tpo_flowchart" src="https://user-images.githubusercontent.com/19393296/167164207-afd721ec-a2f1-4234-8991-be6a12fc717b.jpg" /></p>
<h2 id="modifying-pipeline-command-parameters">Modifying pipeline command parameters</h2>
<p>Parameters used in the pipeline commands are set within the config files. Instructions for how to set these default parameters are discussed <a href="https://github.com/mctp/tpo/wiki/Configuration">here</a>. However, there are instances where we wish to modify pipeline commands for a subset of samples and do not wish to make an entirely new config file to do this. In this instance we can modify these paramaters by passing them when we call TPO. An axample for how to do this during Crisp-Quasr is shown below.</p>
<pre><code>../../mokefile.py -config ../../mokefile_agilentv4_grch38-tpo_1.4.txt crisp_quasr SI_26995 ../../repo/crisp-align/SI_26995-CDMJCANXX-4/ --nowait --preemptible -cargs 'QUASR_MIXCR::false;QUASR_COUNTGTF::/../refs/grch38/ensembl/grch38.97.clean.gtf'
</code></pre>
<p>In this case, we make two amendments to the config file - the first modifying the QUASR_MIXCR parameter and the second the QUSR_COUNTGTF parameter. These parameters are separated by a semicolon and encolsed with single quotes. '-cargs' is used to indicate the parameters are being passed. </p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../js/base.js"></script>
        <script src="../../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
